# Chapter 01

## 자바스크립트에서 타입스크립트로

### 1.1 자바스크립트의 역사

브렌던 아이크는 웹사이트를 쉽게 접근하고 사용할 수 있는 자바스크립트를 10일만에 설계했다. 자바스크립트의 운영위원회인 TC39는 ECMAScript의 새로운 버전을 2015년부터 매년 출시하여 브라우저, 임베디드 애플리케이션, 그리고 서버 런타임을 포함한 다양한 환경에서 새로운 버전과 이전 버전과의 호환성을 수십 년동안 유지했다.

### 1.2 바닐라 자바스크립트의 함정

#### 1.2.1 값 비싼 자유

바닐라 자바스크립트를 사용했을 때의 약점은 프로젝트 규모가 커지고 장기화될수록 더욱 드러난다.

다른 언어는 컴파일러가 충돌할 수 있다고 판단하면 코드 실행을 거부할 수 있다. 하지만 자바스크립트처럼 충돌 가능성을 먼저 확인하지 않고 코드를 실행하는 동적(dynamic) 타입 언어는 그렇지 않다.

#### 1.2.2 부족한 문서

자바스크립트 언어 사양에는 함수의 매개변수, 함수 반환, 변수 또는 다른 구성 요소의 의미를 설명하는 표준화된 내용이 없다. 따라서 많은 개발자가 JSDoc 표준을 채택했다.

하지만, JSDoc 또한 다음과 같은 단점이 존재한다.

- JSDoc 설명이 코드가 잘못되는 것을 막을 수 없다.
- JSDoc 설명이 이전에는 정확했더라도 리팩터링 중에 생긴 변경 사항과 관련된 현재 유효하지 않은 JSDoc 주석을 모두 찾기란 어렵다.
- 복잡한 객체를 설명할 때는 다루기 어렵고, 타입과 그 관계를 정의하려면 다수의 독립형 주석이 필요하다.

#### 1.2.3 부족한 개발자 도구

### 1.3 타입스크립트

타입스크립트는 2010년대 초에 마이크로소프트 내부에서 만들어진 후 2012년에 출시 및 오픈 소스화되었다. 또한, 타입스크립트는 종종 '**자바스크립트의 상위 집합(superset)**' 혹은 '**타입이 있는 자바스크립트**'로 설명되곤 한다.

**타입스크립트는 간략하게 4가지로 설명된다.**

- **프로그래밍 언어**
- **타입 검사기**
- **컴파일러**
- **언어 서비스**

### 1.4 타입스크립트 플레이그라운드에서 시작하기

#### 1.4.1 타입스크립트 실전

코드를 입력할 때 편집기에서 간단한 오류를 미리 알려준다. 자바스크립트 처럼 코드를 실행하고 오류가 발생할 때까지 기다리는 것보다 훨씬 유용하다.

#### 1.4.2 제한을 통한 자유

타입스크립트를 사용하면 매개변수와 변수에 제공되는 값의 타입을 지정할 수 있다. 타입스크립트는 코드의 한 영역을 변경하더라도, 이 코드를 사용하는 다른 코드 영역이 멈추지 않는다는 확신을 줄 수 있다.

예를 들어, 함수의 매개변수 개수를 변경했을 경우 변경된 함수를 호출하는 코드를 업데이트하지 않았다면 타입스크립트가 알려준다. 쏘 스윗

#### 1.4.3 정확한 문서화

`interface` 등으로 코드를 문서화하는 타입스크립트의 정밀함을 확인할 수 있다.

아직 책에서는 다루지 않았지만, **타입스크립트는 구문을 적용해 객체(Obejct)의 '형태'를 설명하고, 객체가 어떻게 보이는지 설명**한다.

#### 1.4.4 더 강력한 개발자 도구

타입스크립트의 타입 검사기를 추가하면 이미 작성한 코드에 대해서도 유용한 제안을 제공한다. (자동 완성 기능)

#### 1.4.5 구문 컴파일하기

타입스크립트 컴파일러에 타입스크립트 코드를 입력하면, 타입을 검사한 후 자바스크립트로 변환한다. 편의상 컴파일러는 최신 문법이나 이전 ECMAScript에 상응하는 코드로 컴파일할 수도 있다.

### 1.5 로컬에서 시작하기

Node.js가 설치되어 있으면 타입스크립트를 실행할 수 있다. 터미널에서 `tsc` 명령어로 타입스크립트를 실행하자. 일단 타입스크립트가 올바르게 설정되었나 확인부터,,,

```bash
$ tsc -v
Version 4.7.2
```

#### 1.5.1 로컬에서 실행하기

다음 명령어를 실행해 `tsconfig.json`을 생성하자.

```bash
$ tsc --init
```

`tsconfig.json`은 타입스크립트가 코드를 분석할 때 사용하는 설정을 선언한다. `tsc`를 실행해 폴더의 모든 파일을 컴파일하도록 지시할 수 있고, 타입스크립트가 모든 구성 옵션에 대해서 tsconfig.json을 참조할 수 있다.

`tsc` 명령어 뒤에 파일명을 입력하여 실행시키자.

```bash
$ tsc index.ts
```

코드에 오류가 발생하더라도, 구문은 여전히 완벽하게 유효하다. 타입스크립트 컴파일러는 타입 오류와는 상관없이 입력 파일로부터 자바스크립트를 계속 생성한다.

#### 1.5.2 편집기 기능

`tsconfig.json`을 생성할 때의 또 다른 이점은 편집기에서 특정 폴더를 열었을 때, 해당 폴더를 타입스크립트 프로젝트로 인식한다는 것이다. 타입스크립트 코드를 분석하는데 사용하는 설정은 해당 폴더의 `tsconfig.json`를 따르게 된다.

### 1.6 타입스크립트에 대한 오해

타입스크립트의 몇 가지 제약에 대해 알아보자.

#### 1.6.1 잘못된 코드 해결책

타입스크립트는 자바스크립트 코드를 구조화하는 데 도움이 되지만, 타입 안정성 강화를 제외하고는 해당 구조가 어떻게 보여야 하는지에 대해서는 어떤 것도 강요하지 않는다.

**자바스크립트에서 사용했던 아키텍처 패턴 중 무엇이든 사용해서 코드를 작성할 수 있다.**

#### 1.6.2 자바스크립트로의 확장

타입스크립트의 설계 목표는 다음과 같이 명시되어 있다.

- 현재와 미래의 ECMAScript 제안에 맞춘다.
- 모든 자바스크립트 코드의 런타임 동작을 유지한다.

**타입스크립트는 자바스크립트 작동 방식을 전혀 변경하지 않는다.** 타입스크립트 개발자들은 자바스크립트에 추가되거나 자바스크립트와 충돌할 수 있는 새로운 코드 기능을 추가하지 않기 위해 매우 열심히 노력했다. (ECMAScript 자체에서 작업하는 기술 위원회인 TC39의 영역)

#### 1.6.3 자바스크립트보다 느림

인터넷 속 익명의 개발자가 런타임에서 타입스크립트는 자바스크립트보다 느리다고 할지 모른다. 하지만 이 주장은 부정확하고 오해의 소지가 있다.

타입스크립트가 코드에 적용하는 유일한 변경 사항은 IE11과 같이 오래된 런타임 환경을 지원하기 위해, 이전 버전의 자바스크립트로 코드를 컴파일하도록 요청하는 경우이다.

**운영 프레임워크 대다수는 타입스크립트의 컴파일러를 전혀 사용하지 않는다.** 대신 트랜스파일을 위한 별도의 도구를 사용하고, 타입스크립트는 타입 검사용으로만 사용한다.

물론 타입스크립트 코드를 빌드하는 데 시간이 조금 더 걸린다. 타입스크립트 코드는 브라우저나 Node.js와 같은 환경에서 실행되기 전에 자바스크립트로 컴파일 되어야하기 때문. 그치만 코드에서 발생할 수 있는 오류를 분석하는 느린 타입스크립트 기능은 실행 가능한 애플리케이션 코드 파일을 생성하는 것과는 분리된 채로 수행된다.

> `ts-node`와 `deno`처럼 타입스크립트 코드를 직접 실행하는 것처럼 보이는 프로젝트에서도, 실행하기 전에 내부적으로 타입스크립트 코드를 자바스크립트로 변환한다.

#### 1.6.4 진화가 끝남

웹의 진화는 끝나지 않았고, 타입스크립트도 마찬가지이다.

### 정리

1장에서는 자바스크립트의 주요 약점과 타입스크립트가 작동하는 방식, 타입스크립트를 시작하는 방식에 대해 알아보았다.
